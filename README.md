
# Penetration Testing Methodology 2020

## Background

`
During the security assessments and ethical hacking engagements, I use my Penetration Testing Methodology.
My methodology phases are saved in this CherryTree ctb file for anyone that may find it of value, free to use.
I use this as my Penetration Testing engagement play book.
`

### GitHub Repository Files
* PenTestMethodology2020.ctb - is the latest file contain the below topics
* PenTestMethodology2020.ctb~ - backup 
* PenTestMethodology2020.ctb~~ - additional backup
* README.md - This File.

## Start

`
Depending on your role in the Infosec PenTest governance structure, you may assist in the following intial tasks.
`
* Initial Engagement with Stakeholders.
* Draw up and sign the legal agreements, MSA's and NDA's.
* Scope the Statement of work and the Rules of engagement with Stakeholders, Business Owners and 3rd party hosting providers.
* Before engaging in the security assessment PenTest milestone, confirm you have the approval to start the PenTest.
* Document all PenTest activities and findings and keep a detailed risk register during the pentest phase.

### Foundation

* URL References - source of Information Security i used to compile my Penetration Testing Methodology
* Wordlists sources
* Python Programming
* PowerShell
* Linux Commands
* JavaScript
* Command and Control / C2 / C&C / Cloud Services
* Bash Scripts
* Go Coding
* Installations
* C++/CPP Coding
* VisualBasic Code

```
Target + Vulnerability + Exploit = Compromise
```

## Reconnaissance

```
Information gathering before going into enumeration phase.
Get understanding of the target and it's services and systems.
```

### Scanning 
* netdiscover
* nmap
  * UDP scans
  * List Target Ports
  * no response ICMP
  * full ignore
  * external scan
  * network discovery
  * all exploit scripts
  * nmap grepper
  * Fingerprint & Banner
  * help
* autorecon
* port knocking
* wget
* wordpress scan
* masscan
* wireshark

### OSINT
* maltego
* Google Dork
* shodan
* Collections
* WayBack Machines Web Archives
* Google Cached

## Enumeration

`
Most important phase, rigorous enumeration of all recond services and ports.
The idea is to collect as much interesting information as possible about the target and it's services.
Exploitation or attacks are only possible once you can find an exploit in the target services or ports. 
`

* 21 FTP
* 22 SSH
  * login with private key
  * ShellShock
  * Exploit victim priv key
* 23 Telnet
* 25 SMTP
* 53 DNS
* 80/443 HTTP
  * wfuzz
  * gobuster
  * dirb
  * dirsearch
  * wordpress
  * nikto
  * CEWL
  * wget
  * curl
  * Browser & Dev Tools
* 88 Kerberost
* 110 POP3
* 111 NFS
* 123 NTP
* 135 RPC
* 139/445 SMB
  * nmap smb
  * msfconsole
  * crackmapexec smb
  * smbclient
    * smbclient null
    * mount smb
    * enum shares
    * smbget
  * smbmap
  * rpcclient
    * rpclient help
    * enum printers
    * bash query RID
  * enum4linux
* 161 SNMP
* 389/3269 LDAP
* 554 RTSP
* 593 RPC over HTTP
* 631 Printers
* 636 LDAP
* 1056 Trojan / Virus
* 1433 SQL
* 1521 Oracle
* 2049 NFS
  * show mount
* 3268 GlobalCat
* 3306 MYSQL
  * msfconsole
* 3389 RDP
* 4386 HQK
* 5666 NRPE (Nagios)
* 5985 wsmans
  * crackmapexec winrm
  * Evil-WinRM
* 6379 REDIS
* 6667 irc
* 6699 napster
* 8080 Web Servers
  * HttpFileServer HFS
  * Jenkins/Jetty
* 8291 MikroTik
* 8443 NetGear
* 8500 FMTP Coldfusion
* 9191 Printer PaperCut
* 9256 Achat
* 9389 AD Web
* 11211 memcached
* 13327 CrossFire
* 50000 Jetty


## Exploitation 

`
Once all possible services have been enumerated with, or without credentials, then attempt to establishing a basic low privilege shell as a user or service account.
Once thorough enumeration of services and ports completed, aim too obtain a low level user and or service account shell by exploiting it.
`

* Default Credentials
* Hosting
  * samba smbd
  * SMBserver
  * python2 HTTP
  * python3 http
  * FTP hosting
* File transfer
  * PowerShell
  * CURL
  * certutil
  * wget
  * ftp file transfers
  * smbclient
  * scp
  * netcat
  * VBscript
* Payloads
  * exiftool
  * PayloadsAllTheThings
  * msfvenom
    * Windows 32bit
    * Windows 64bit
    * Linux
    * Mobile
* Compilers & Debuggers
  * dnSpy
  * gcc
  * Immunity Debugger
  * fpm compiler
  * Visual Studio Code
  * minGW
  * jDoodle
* Connect
  * NetCat
  * Python
* Cracking
  * Active Crack
    * hydra
    * medusa
    * wordpress
    * crackmapexec
    * Python brute force
  * Offline Cracking
    * hashcat GPU host
    * identify hash
    * base64
    * VNC reg decryt
    * John
      * keepass db
      * shadow.bak
      * zip2john
      * ssh2john
      * netNTLMv2
      * Raw-MD5
      * pgp & asc
    * BASH brute force
    * Burp Suite Decoder
    * Python scripts
    * fcrackzip
  * Online Websites Decrypt Services
* Metasploit
  * msfconsole
  * libreNMS
  * smtp
  * reverse_tcp
  * smb metasploit
  * HFS HttpFileServer
  * msfconsole psexec
  * bluekeep
* Exploits & Low Shell
  * Exploiting
    * ftp
      * Example FTP Script
      * telnet 21
      * ProFTPd exploit
      * ftp upload sh
    * ssh
      * login using priv&pub key
      * custom port and noprofile
      * ssh-keygen
      * ssh port forwarding
      * ssh log poisoning
    * LFI
      * LFI wordlist
      * Gila CMS
      * ColdFusion
      * win.ini
      * LFI example5
    * JsonPickle Exploitation
    * Directory Traversal
    * RCE
      * umbracp webapp
      * curl
      * openEMR
      * Drupal 7
      * tomcat9
    * SMB
      * smbmap
      * smbclient
      * crackmapexec
      * mount smb
    * Arbitrary File upload
    * Impacket MSSQLclient
    * VHD Hyper-V
    * ntp
    * OpenSSL heartbleed
    * REDIS
    * HTTP Shellshock
    * phpMyAdmin
    * nginx
    * cms
    * node.js
    * jserv Apache
    * blind back tick
    * .htpasswd
  * Linux Reverse Shell
    * bash
    * python reverse shell
    * full interactive shells
    * NetCat
    * HTTP force Browsing
    * php excution
    * Kernel OS
  * Windows Reverse Shell
    * Evil-WinRm
    * Kerberoasting
    * PowerShell
    * iis aspx
    * psexec.py
    * coldfusion
    * MSSQL cmdshell
    * Rejetto HTTP file server
    * Windows Kernel Exploits
    * Windows REG
    * Jenkins
* Buffer Overflow - Windows
  * fuzz - pattern - EIP - JMP ESP - bad characters - NOP sled - Payload
* Buffer Overflow - Linux
  * fuzz - pattern - EIP - JMP ESP - bad characters - NOP sled - Payload
* Extractions!
  * Reversing
    * r2
    * ghidra
  * Crypto
    * Cistercian Monks Numrals
    * Numbers > Dec > Hex > Ascii
    * CyberChef
    * fernet
    * XOR operation
    * vigenere cipher
    * Integrity Check Files
  * Stego
    * binwalk
    * zsteg
    * steghide
    * stegCracker
    * exiftool
    * pngcheck
    * jsteg
    * multimon-ng
    * stegSNOW
    * Homoglyphs
    * binary image
    * steg_brute.py
    * stegsolve.jar
    * hexdump
    * QR codes
  * forensics
    * usbrip
    * Microsoft Docs
    * volatility
    * packet capture
      * WireShark
    * readpst
    * VHD
    * web archives
  * Mobile
    * mobile backup
    * apk
  * OSINT
    * phishing emails
    * username locations
    * WayBack Machine
    * sherlock

## POST Exploitation

`
We gained low shell, with limited permissions.
Privilege Escalation next to more elevated rights on target or gain full access as root administrator.
`

* Windows
  * Enumerate to privilege escalate
    * Windows cmds
    * winPEAS
    * SherLock
    * Watson 
    * JAWS
    * Windows Exploit Suggester
    * seatbelt
    * SharpUp
    * rpcclient
    * PowerShell Enum
    * Registry
    * icacls
    * SysInternals
    * PowerUp
  * Privilege Escalation Windows
    * dnscmd
    * evil-winrm
    * CapCom.sys
    * Port Forwarding
      * socat tunnel
      * plink putty
      * SSH Tunnel forwarding
    * Windows SubSystem Linux
    * Windows Privileges
      * hot patato
      * Potato Impersonation
      * SeImpersonatePrivilege
    * Alternate Stream
      * PowerShell Stream
      * smb allinfo
    * runAS
    * Services
      * Service escalate registry
      * Service Escalate Executable
      * Service Unquoted Service Path
      * Service Binary Path
    * StartUp Apps
    * Windows Kernel Exploits
    * psExec.py PrivEsc
    * User Account Control (UAC)

* Linux
  * Enumerate inside Linux Shell
    * Linux Enum Commands
      * System Enum
        
      * User Enum
      * Network Enum
      * find weak perm
      * password hunting
    * LinPEAS
    * LinEnum
    * pspy    
    * Linux Exploit Suggester
    * Linux Priv Checker
    * Access MDB
    * Capabilities
  * Linux Priv Esc to increase rights in low shell
    * Weka File Perm
    * Kernel Exploits
    * Stored Passwords
    * sudo
      * shell escaping
      * intended function
      * LD_Preload
      * pwfeedback
      * systemctl
      * dpkg
      * perl scripts
      * zip
    * Python Lib HiJack
    * SSH Keys
    * psexec 
    * PenTestMonkeys
    * Full Interactive Shell
    * SUID
      * Shared Object Injection
      * Symlinks
      * Envrionment Variables
      * sysinfo
      * Statuscheck
      * logrotate
    * Capabilities PrivEsc
    * Schedule Cron Jobs
    * NFS Root Squashing
    * Docker
    * Lxd Privilege Escalation


## Web Apps

`
Following the OWASP Top 10 Web Application Testing Attack Guide and their CheckList of Test Cases as guide through Web App Pentests engagements.
`

* [OWASP Web Application Testing Attack Guide v4 - PDF](https://owasp.org/www-project-web-security-testing-guide/assets/archive/OWASP_Testing_Guide_v4.pdf)
* [OWASP Testing Checklist v4 - Microsoft EXCEL](https://github.com/tanprathan/OWASP-Testing-Checklist)
* [OWASP Testing Checklist - Google Sheet](https://docs.google.com/spreadsheets/d/1LIq3SNMxmMoyicuJzaqbIbX9rsPH_k0puHU4XcRdxU0/edit?usp=sharing)

### OWASP Web Application Testing Attack Guide
* Info Recon(INFO)
* Configuration (CONFIG)
* Identity (IDENT)
* Authentication (AUTHN)
* Authorization (AUTHZ)
* Session (SESS)
* Input Validation (INPVAL)
* Error Handling (ERR)
* Weak Cryptography (CRYPST)
* Business Logic (BUSLOGIC)
* Client Side (Client) 


## Attack Systems 

`
Certain systems and methods are high value targets such as eMail, Directory services, WiFi, Network Pivoting.
These systems have very detailed and specific attack tools to enumerate and exploit.
`
* Active Directory
  * LLMNR Poison
  * HashCat
  * SMB Relay
  * msfconsole 
  * impacket psexec
  * IPv6 Attack
  * PowerView
  * BloodHound
  * AD Attack POST Compromise
* EMail
* Printers
* DNS
* Pivoting Networks
* SQL
* Oracle
* Wireless

## Reporting 

* Introduction
* Executive Summary
* Findings
* Risk Matrix
* Recommendations
* Remediation


`
Once the security assessment is complete the value to the stateholders are in the detailed and quality findings presented, recommendations and remediation reported.
`

`
Thanks to all the family, friends, mentors, trainers and web sites in the security community that share their knowledge.
This is my notes and views I have collected from various sources, on how I approach my penetration testing journey.
I hope this help others in the InfoSec and PenTesters community.
`

### My Online References:

* [HackTheBox Profile](https://www.hackthebox.eu/profile/226855)
* [TryHackMe Profile](https://tryhackme.com/p/SkippyPeanut)
* [LinkedIN Profile](https://portknocking.blogspot.com/)
* [Udemy Profile](https://www.udemy.com/user/juan-botes/)
* [Resume](https://docs.google.com/document/d/1AEr1alse0SWtcGd_xyGREsYtSyExJ3hZVX0DbPQ7oUU/edit?usp=sharing)
* [My General Blog](https://portknocking.blogspot.com/)
* [This PenTest Methodology](https://github.com/botesjuan/PenTestMethodology2020)

```
#KeepTrying
#KeepTraining
#KeepSharing
```
